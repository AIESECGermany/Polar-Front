<ng-container *ngIf="ready then content else loading"></ng-container>

<ng-template #content>
    <div class="content">
        <div>
            <span class="characteristics"><span>Applicant ID:</span><span class="infos">{{applicantDetails._id}}</span></span>
            <span class="characteristics"><span>First Name:</span><span class="infos">{{applicantDetails.firstName}}</span></span>
            <span class="characteristics"><span>Family Name:</span><span class="infos">{{applicantDetails.familyName}}</span></span>
            <span class="characteristics"><span>Local Committee:</span><span class="infos">{{applicantDetails.lc}}</span></span>
            <span class="characteristics">
                <span>Status:</span>
                <select style="min-width: 15.7rem;" class="infos" [(ngModel)]="currentApplicantStatus">
                    <option *ngFor="let stage of applicantStages" [ngValue]="stage.value">{{stage.displayValue}}</option>
                </select>
            </span>
            <span class="characteristics"><span>Email:</span><span class="infos">{{applicantDetails.email}}</span></span>
            <span class="characteristics"><span>Telephone Number:</span><span class="infos">{{applicantDetails.telephone}}</span></span>
            <span class="characteristics"><span>Occupation:</span><span class="infos">{{applicantDetails.occupation}}</span></span>
            <span class="characteristics"><span>German Level:</span><span class="infos">{{applicantDetails.german}}</span></span>
            <span class="characteristics"><span>Recruitment Channel:</span><span class="infos">{{applicantDetails.mktChannel}}</span></span>
            <span class="characteristics"><span>Motivation for joining:</span><span class="infos">
                <ng-container *ngFor="let motivation of motivationForJoiningOptions; let i = index">
                    <ng-container *ngIf="motivation.value === 'true'">{{motivation.displayValue}}<br/></ng-container>
                </ng-container>
            </span></span>
            <span class="characteristics"><span>CV:</span><span class="infos">{{applicantDetails.cv}} None</span></span>
            <span class="characteristics"><span>LinkedIn:</span><a class="infos" [href]="applicantDetails.linkedin">{{applicantDetails.linkedin}}</a></span>
            <button (click)="saveApplicantChanges()">Save Changes</button>
        </div>

        <div class="changelog">
            <p class="header">Changelog: </p>
            <p>12.03.2023 - Status changed: Open </p>
            <p>13.03.2023 - Status changed: Contacted </p>
            <p>14.03.2023 - Status changed: Interviewed </p>
            <p>15.03.2023 - Status changed: Accepted </p>
        </div>
        
        <div class="chatbox">
            <div id='chatborder'>
                <p *ngFor="let comment of applicantDetails?.comments" class="chatlog">{{comment}}</p>
                <input type="text" name="chat" id="chatbox" [(ngModel)]="newComment" (keydown.enter)="addComment()" placeholder="Add Comment">
            </div>
        </div>        
    </div>
</ng-template>

<ng-template #loading>
    <div class="loading">
        <mat-spinner></mat-spinner>
    </div>
</ng-template>